(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/default.17d95c21.jpg"},35:function(e){e.exports=JSON.parse("{}")},39:function(e,t,a){e.exports=a.p+"static/media/testhh.5b0b62bf.jpg"},44:function(e,t,a){e.exports=a(99)},49:function(e,t,a){},50:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},51:function(e,t,a){},91:function(e,t,a){var n={"./default.jpg":14,"./img_5terre.jpg":92,"./testhh.jpg":39,"./testjjj.jpg":93,"./testk.jpg":94,"./testl2.jpg":95,"./testrrrr.jpg":96,"./testrrrr2.jpg":97,"./testsandy.jpg":98};function i(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=91},92:function(e,t,a){e.exports=a.p+"static/media/img_5terre.8a1210b6.jpg"},93:function(e,t,a){e.exports=a.p+"static/media/testjjj.965cfbf4.jpg"},94:function(e,t,a){e.exports=a.p+"static/media/testk.25d00733.jpg"},95:function(e,t,a){e.exports=a.p+"static/media/testl2.25d00733.jpg"},96:function(e,t,a){e.exports=a.p+"static/media/testrrrr.781e7d09.jpg"},97:function(e,t,a){e.exports=a.p+"static/media/testrrrr2.781e7d09.jpg"},98:function(e,t,a){e.exports=a.p+"static/media/testsandy.781e7d09.jpg"},99:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(25),r=a.n(s),o=(a(49),a(8)),l=a(16),c=a(17),u=a(19),m=a(18),d=(a(50),a(51),a(9)),h=a(7),g=a(26),f=a.n(g),p=a(41),y=a(27),v=a.n(y),b=a(20),C=a.n(b),k=(a(76),a(14)),E=a.n(k),N=(a(35),a(15)),L=a.n(N),S=a(5),j=a(11),w=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={id:e.match.params.id,aboutMe:"",fileName:"",showModal:!1,navLinks:e.navLinks,subCategory:"",articleName:"",content:"",mode:"admin",edit:"",viewArticle:!1,imageFile:null,liked:!1,likeCount:0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("/navlinks/aboutMe",{method:"GET",headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({aboutMe:t})})),C.a.highlightAll()}},{key:"componentDidUpdate",value:function(e,t,a){C.a.highlightAll()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(o.a)({},a,n))}},{key:"handleFile",value:function(e){var t,a=this,n=e.target.name,i=new FileReader,s=e.target.files[0];0!==e.target.value.length?(i.onloadend=function(){var e=Object(p.a)(f.a.mark((function e(t){var i,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"aboutMe"===n?(i={category:"home",aboutMe:t.target.result,path:"/home"},r=a,fetch("/navlinks/aboutMe",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}).then((function(e){r.setState({aboutMe:t.target.result,fileName:s.name})}))):a.setState((l={},Object(o.a)(l,n,t.target.result),Object(o.a)(l,"fileName",s.name),l));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.readAsText(s)):this.setState((t={},Object(o.a)(t,n,this.state[n]),Object(o.a)(t,"fileName",this.state.fileName),t))}},{key:"handleOpenModal",value:function(e,t){var a=this;if(void 0===t)this.setState({showModal:!0,edit:e,articleName:"",subCategory:"",content:"",articleIndex:-1});else{var n=this.state.navLinks.find((function(e,t,n){return e.category===a.state.id})).items.findIndex((function(e,a,n){return e.item===t.item}));this.setState({showModal:!0,edit:e,articleName:t.item,subCategory:t["sub-category"],content:t.content,articleIndex:n,toBeChangedArticleName:t.item})}}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1})}},{key:"AddLink",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(L.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",onRequestClose:function(){return e.handleCloseModal()},className:"Modal",overlayClassName:"Overlay"},i.a.createElement("h1",{style:{textAlign:"center"}},"add"===this.state.edit?"Add new item":"Edit item"),i.a.createElement("form",null,i.a.createElement("label",null," Article Name: "),i.a.createElement("input",{name:"articleName",value:this.state.articleName,onChange:function(t){return e.handleChange(t)},type:"text"}),i.a.createElement("br",null),i.a.createElement("label",null,"Category: "),i.a.createElement("select",{name:"subCategory",value:this.state.subCategory,onChange:function(t){return e.handleChange(t)}},this.state.navLinks.find((function(t,a,n){return t.category===e.state.id})).subCategories.map((function(e,t,a){return i.a.createElement("option",{key:"subcat".concat(e).concat(t)},e)}))),i.a.createElement("br",null),i.a.createElement("label",null,"Attach content:"),i.a.createElement("input",{type:"file",accept:".md",className:"file",name:"content",onChange:function(t){return e.handleFile(t)}}),i.a.createElement("br",null)),i.a.createElement("button",{onClick:function(){return e.addNewItem()}}," Add the article "),i.a.createElement("button",{onClick:function(){return e.handleCloseModal()}},"Close")))}},{key:"addNewItem",value:function(){var e=this;this.state.navLinks.findIndex((function(t,a,n){return t.category===e.state.id}));if("add"===this.state.edit)if(void 0===this.state.navLinks.find((function(t,a,n){return t.category===e.state.id})).items.find((function(t,a,n){return t.item===e.state.articleName}))){var t={item:this.state.articleName,"sub-category":this.state.subCategory,content:this.state.content,uploadedOn:(new Date).toISOString(),image:!1,path:"/".concat(this.state.id,"/").concat(this.state.articleName.replace(/\s/g,""))},a=this.state.navLinks.find((function(t,a,n){return t.category===e.state.id}));a.items.push(t);var n={category:a.category,path:a.path,subCategories:a.subCategories,items:a.items},i=this;fetch("/navlinks/",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){alert("Article added"),i.setState({navLinks:i.state.navLinks,showModal:!1})}))}else alert("Article name already exists");else if("edit"===this.state.edit){var s=this.state.navLinks.find((function(t,a,n){return t.category===e.state.id})),r=s.items.findIndex((function(t,a,n){return t.item===e.state.toBeChangedArticleName})),o={item:this.state.articleName,"sub-category":this.state.subCategory,content:this.state.content,uploadedOn:(new Date).toISOString(),image:this.state.articleName===this.state.toBeChangedArticleName&&s.category===this.state.id,path:"/".concat(this.state.id,"/").concat(this.state.articleName.replace(/\s/g,""))};s.items.splice(r,1,o);var l={category:s.category,path:s.path,subCategories:s.subCategories,items:s.items},c=this;fetch("/navlinks/",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(l)}).then((function(e){alert("Article edited"),c.setState({navLinks:c.state.navLinks,showModal:!1})}))}}},{key:"deleteArticle",value:function(e){var t=this,a=(this.state.navLinks.findIndex((function(e,a,n){return e.category===t.state.id})),this.state.navLinks.find((function(e,a,n){return e.category===t.state.id}))),n=a.items.findIndex((function(e,a,n){return e.item===t.state.toBeChangedArticleName}));a.items.splice(n,1);var i={category:a.category,path:a.path,subCategories:a.subCategories,items:a.items};if(window.confirm("Are you sure?")){var s=this;fetch("/navlinks/",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}).then((function(e){s.setState({navLinks:s.state.navLinks}),alert("Article deleted")}))}}},{key:"handleThumbnail",value:function(e,t){var a=this;console.log(t.target.files[0],e),this.setState({imageFile:t.target.files[0]});var n=this.state.navLinks.find((function(e,t,n){return e.category===a.state.id})),i={item:e.item,"sub-category":e["sub-category"],content:e.content,uploadedOn:e.uploadedOn,path:e.path,image:!0},s=n.items.findIndex((function(t,a,n){return t.item===e.item}));n.items.splice(s,1,i);var r={category:n.category,path:n.path,subCategories:n.subCategories,items:n.items},o=new FormData;o.append("myImage",t.target.files[0]);var l=this;fetch("/navlinks/upload/".concat(n.category,"/").concat(e.item.replace(/\s/g,"")),{method:"POST",body:o}).then((function(e){fetch("/navlinks/",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){l.setState({navLinks:l.state.navLinks})}))}))}},{key:"handleLike",value:function(){this.state.liked?this.setState({likeCount:this.state.likeCount-1,liked:!this.state.liked}):this.setState({likeCount:this.state.likeCount+1,liked:!this.state.liked})}},{key:"render",value:function(){var e=this,t=(a(39),this.state.aboutMe),n=i.a.createElement("div",{id:"rawHtml",className:"language-html"},i.a.createElement(v.a,{source:t}));return i.a.createElement("div",null,"home"===this.state.id||void 0===this.state.navLinks.find((function(t,a,n){return t.category===e.state.id}))?i.a.createElement("div",null,i.a.createElement("input",{type:"file",accept:".md",className:"addItem",name:"aboutMe",onChange:function(t){return e.handleFile(t)}}),i.a.createElement("article",{style:{overflow:"auto",minHeight:330,maxWidth:900,minWidth:200}},n)):i.a.createElement(d.a,null,i.a.createElement(h.d,null,i.a.createElement(h.b,{exact:!0,path:"/".concat(this.state.id)},i.a.createElement("h3",null,"Please select an item."),i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.handleOpenModal("add")}},"Add a new element"),this.AddLink(),i.a.createElement("section",{className:"grid-c"},void 0!==this.state.navLinks.find((function(t,a,n){return t.category===e.state.id})).items?this.state.navLinks.find((function(t,a,n){return t.category===e.state.id})).items.map((function(t,n,s){return i.a.createElement("div",{className:"row grid-i",key:"div".concat(t.item).concat(n)},"admin"===e.state.mode?i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return e.deleteArticle(t.item)}},"X"),i.a.createElement("button",{onClick:function(){return e.handleOpenModal("edit",t)}},"Edit article"),i.a.createElement("label",null," thumbnail:"),i.a.createElement("input",{type:"file",accept:"image/*",className:"file",name:"imageFile",onChange:function(a){return e.handleThumbnail(t,a)}})):null,i.a.createElement("hr",null),i.a.createElement(d.b,{to:{pathname:"".concat(e.props.match.url,"/").concat(t.item.replace(/\s/g,"")),state:{article:t}}},t.image?i.a.createElement("img",{src:a(91)("./".concat(e.state.id).concat(t.item.replace(/\s/g,""),".jpg")),onError:function(e){return e.target.src=E.a},className:"column",key:"image".concat(t.item).concat(n),width:"200",height:"200",style:{backgroundColor:"grey"},alt:t.item}):i.a.createElement("img",{src:E.a,onError:function(e){return e.target.src=E.a},className:"column",key:"image".concat(t.item).concat(n),width:"200",height:"200",style:{backgroundColor:"grey"},alt:t.item}),i.a.createElement("div",{className:"column",key:"".concat(t.item).concat(n)},i.a.createElement("p",null,i.a.createElement("span",{className:"itemHeading"},"Item :"),i.a.createElement("span",{className:"itemName"},t.item)),i.a.createElement("p",null,i.a.createElement("span",{className:"itemHeading"},"Sub-category:"),i.a.createElement("span",{className:"itemName"},t["sub-category"])),i.a.createElement("p",null,i.a.createElement("span",{className:"itemHeading"},"Created on:"),i.a.createElement("span",{className:"itemName"},new Date(t.uploadedOn).toLocaleDateString())))))})):null),this.AddLink())),C.a.highlightAll(),i.a.createElement(h.b,{exact:!0,path:"".concat(this.props.match.path,"/:topicId"),render:function(t){return i.a.createElement("div",null,i.a.createElement("button",null,i.a.createElement(d.b,{to:"".concat(e.props.location.pathname)},"Back")),i.a.createElement("h3",null,t.location.state.article.item),i.a.createElement("div",null,i.a.createElement("div",{style:{overflow:"hidden",minHeight:330,maxWidth:200,minWidth:50,width:10,float:"left",position:"fixed",paddingLeft:40}},i.a.createElement(S.a,{icon:j.b,size:"2x"})," ",i.a.createElement("hr",null),e.state.likeCount),i.a.createElement("div",{id:"rawHtml",className:"language-html",style:{overflow:"auto",minHeight:330,maxWidth:1e3,minWidth:200,marginLeft:200}},i.a.createElement(v.a,{source:e.state.navLinks.find((function(t,a,n){return t.category===e.state.id})).items.find((function(e,a,n){return e.item.replace(/\s/g,"")===t.match.params.topicId})).content}))),i.a.createElement("div",null,i.a.createElement(S.a,{icon:j.b,size:"2x",onClick:function(){return e.handleLike()},color:e.state.liked?"blue":"black"})))}}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.match.params.id===t.id?null:{id:e.match.params.id,fileName:"",showModal:!1,navLinks:e.navLinks,subCategory:"",articleName:"",content:"",mode:"admin",edit:"",viewArticle:!1,imageFile:null,liked:!1,likeCount:0}}}]),n}(i.a.Component),x=a(21),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={navLinks:[],showModal:!1,itemName:"",subCategory:"",subCategoryLists:[],editSubCategory:!1,role:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/navLinks",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({navLinks:t})})),L.a.setAppElement("body")}},{key:"login",value:function(){var e=this;fetch("http://localhost:3000/login/auth/google/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({user:t,role:t.role})}))}},{key:"handleOpenModal",value:function(e,t,a){null===t&&"addCategory"===e?this.setState({showModal:!0,edit:e,itemName:"",subCategoryLists:[],categoryIndex:-1}):this.setState({showModal:!0,edit:e,itemName:t.category,subCategoryLists:t.subCategories,categoryIndex:a,items:t.items})}},{key:"handleCloseModal",value:function(){this.setState({showModal:!1,itemName:"",subCategoryLists:[],editSubCategory:!1})}},{key:"addNewItem",value:function(){var e=this;if("addCategory"===this.state.edit)if(void 0===this.state.navLinks.find((function(t,a,n){return t.category===e.state.itemName}))){var t={category:this.state.itemName,path:"/".concat(this.state.itemName),subCategories:this.state.subCategoryLists,items:[]},a=this;fetch("/navlinks/",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){a.state.navLinks.push({category:a.state.itemName,path:"/".concat(a.state.itemName),subCategories:a.state.subCategoryLists}),alert("Item added"),a.setState({navLinks:a.state.navLinks,showModal:!1})}))}else alert("Item already exists");else if("editCategory"===this.state.edit){var n={category:this.state.itemName,path:"/".concat(this.state.itemName),subCategories:this.state.subCategoryLists,items:this.state.items},i=this;fetch("/navlinks/",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){i.state.navLinks.splice(i.state.categoryIndex,1,n),alert("Item edited"),i.setState({navLinks:i.state.navLinks,showModal:!1})}))}}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(o.a)({},a,n))}},{key:"addSubCategories",value:function(){!1===this.state.editSubCategory?this.state.subCategory.length>0&&!this.state.subCategoryLists.includes(this.state.subCategory)&&(this.state.subCategoryLists.push(this.state.subCategory),this.setState({subCategoryLists:this.state.subCategoryLists})):this.state.currentSubCategory.length>0&&!this.state.subCategoryLists.includes(this.state.currentSubCategory)&&(this.state.subCategoryLists.push(this.state.currentSubCategory),this.setState({subCategoryLists:this.state.subCategoryLists}))}},{key:"handleDeleteSubCategory",value:function(e,t){this.state.subCategoryLists.splice(e,1),this.setState({subCategoryLists:this.state.subCategoryLists})}},{key:"handleEditSubCategory",value:function(e){var t=this.state.subCategoryLists[e];this.setState({editSubCategory:!0,indexToEdit:e,currentSubCategory:t})}},{key:"handleDeleteCategory",value:function(e){var t=this;fetch("/navlinks/".concat(e.category),{method:"DELETE",headers:{"Content-type":"application/json"}}).then((function(e){alert("Item deleted"),t.setState({navLinks:t.state.navLinks})}))}},{key:"AddLink",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(L.a,{isOpen:this.state.showModal,contentLabel:"onRequestClose Example",onRequestClose:function(){return e.handleCloseModal()},className:"Modal",overlayClassName:"Overlay"},i.a.createElement("h1",{style:{textAlign:"center"}},"addCategory"===this.state.edit?"Add a New Nav Item!":"Edit a category"),i.a.createElement("form",null,i.a.createElement("label",null," Item Name: "),i.a.createElement("input",{name:"itemName",value:this.state.itemName,onChange:function(t){return e.handleChange(t)},type:"text"}),i.a.createElement("label",null,"Add categories:"),i.a.createElement("input",{name:"subCategory",value:this.state.subCategory,onChange:function(t){return e.handleChange(t)},type:"text"})),i.a.createElement("button",{onClick:function(){return e.addSubCategories()},disabled:this.state.subCategory.length<=0},"Add this category"),this.state.subCategoryLists.length>0?i.a.createElement("ul",null,this.state.subCategoryLists.map((function(t,a,n){return i.a.createElement("li",{key:"subView".concat(t).concat(a)},e.state.editSubCategory&&a===e.state.indexToEdit?i.a.createElement("input",{type:"text",name:"currentSubCategory",value:e.state.currentSubCategory,onChange:function(t){return e.handleChange(t)}}):t,i.a.createElement(S.a,{style:{marginLeft:3},onClick:function(){return e.handleDeleteSubCategory(a)},icon:j.c}))}))):null,i.a.createElement("button",{onClick:function(){return e.addNewItem()},disabled:""===this.state.itemName||this.state.subCategoryLists.length<=0},"Add "),i.a.createElement("button",{onClick:function(){return e.handleCloseModal()}},"Close")))}},{key:"render",value:function(){var e=this;return i.a.createElement(d.a,null,i.a.createElement("div",{className:"grid-container page-container"},i.a.createElement("div",{className:"content-wrap"},i.a.createElement("nav",{className:"header"},i.a.createElement("ul",{className:"nav"},this.state.navLinks.map((function(t,a,n){return i.a.createElement("li",{key:"nav".concat(t.category).concat(a)},i.a.createElement(d.c,{exact:!0,to:t.path,activeClassName:"selected"},t.category[0].toUpperCase()+t.category.slice(1)),"home"===t.category?null:"admin"===e.state.role?i.a.createElement("span",null,i.a.createElement(S.a,{style:{marginLeft:3},onClick:function(){return e.handleOpenModal("editCategory",t,a)},icon:j.a,size:"1x"}),i.a.createElement(S.a,{style:{marginLeft:2},onClick:function(){return e.handleDeleteCategory(t)},icon:j.c,size:"1x"})):null)})),i.a.createElement("li",null,i.a.createElement("button",{onClick:function(){return e.handleOpenModal("addCategory",null)}},"Add Category")),i.a.createElement("li",{className:"login",onClick:function(){return e.login()}},"Login"))),i.a.createElement("main",{className:"main"},this.AddLink()),i.a.createElement(h.d,null,i.a.createElement(h.b,{exact:!0,path:"/",component:function(){return i.a.createElement(h.a,{to:"/home"})}}),i.a.createElement(h.b,{path:"/:id",render:function(t){return i.a.createElement(w,Object.assign({},t,{navLinks:e.state.navLinks}))}})),i.a.createElement("footer",{className:"footer"},i.a.createElement("div",{className:"container"},i.a.createElement("ul",{className:"footerIcons"},i.a.createElement("li",{className:"icons"},i.a.createElement(S.a,{icon:x.a,size:"2x",color:"black"})),i.a.createElement("li",{className:"icons"},i.a.createElement(S.a,{icon:x.b,size:"2x",color:"steelblue"})),i.a.createElement("li",{className:"icons"},i.a.createElement(S.a,{icon:x.c,size:"2x",color:"red"})))),i.a.createElement("div",{className:"footer-copyright text-center py-3"},"\xa9 2020 Copyright: Sandhya Sankaran")))))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.83dd9fe2.chunk.js.map